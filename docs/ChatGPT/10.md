# 10. マクロとメタプログラミング

## 対応節
- §12 Forms and evaluation
- §16 Macros

## 10.1 基本マクロ
```lisp
(defmacro when (test &rest body)
  `(if ,test (progn ,@body) nil))
```

## 10.2 展開確認
```lisp
(macroexpand '(when t (print 1)))
```

## 10.3 設計原則
- マクロは「評価前のフォーム変換」
- 引数評価回数を制御
- 名前捕獲回避（必要なら `gensym`）

## 10.4 例: 繰り返し抽象化
```lisp
(defmacro unless (test &rest body)
  `(if ,test nil (progn ,@body)))
```
