ISLISPの**第2章：基本構文とデータ型**に飛び込みましょう！



### **2. 基本構文とデータ型**

#### **アトム、シンボル、数値**

- **アトム：**  
  ISLISPでは、*アトム*は最も単純なデータ形式です。リスト以外のものすべてを指し、数値、シンボル、文字などが含まれます。アトムは分割できません。

- **シンボル:**  
  *シンボル*は、名前や識別子を表す特殊なアトムです。変数、関数、またはプログラム内のその他のシンボル的なエンティティを参照するために使用できます。

  例:
  ```lisp
  'x ; これはシンボルです。
  ```

  シンボルは値が割り当てられると、変数としても使用できます。

- **数値:**  
  ISLISPは、以下の数値タイプをサポートしています。
  - **整数:** 自然数（例：`42`、`-1`）。
  - **浮動小数点数：** 小数を含む数値（例：`3.14`、`-0.001`）。

  例：
  ```lisp
  42     ; 整数
  3.14   ; 浮動小数点数
  ```

  ISLISPにおける算術演算は、一般的な数学の規則に従います。
  ```lisp
  (+ 1 2 3) ; 和: 6
  (- 10 4) ; 差: 6
  (* 2 3) ; 積: 6
  (/ 10 2) ; 商: 5
  ```



#### **リスト、コンスセル、配列**

- **リスト:**  
  リストは、Lispにおける基本的なデータ構造です。リストは、アトム、他のリスト、またはその両方の混合を含むことができる、要素の順序付きコレクションです。

  例:
  ```lisp
  (1 2 3)      ; 数値のリスト
  (a b c)      ; シンボルのリスト
  ```

- **Cons セル:**  
    *cons セル* は、Lisp におけるリストの構成単位です。 2つの部分から構成されます。 *car*（最初の要素）と *cdr*（残りのリスト）です。 リストは、cons セルを繰り返し結合することで構築できます。
  
  例：
  ```lisp
  (cons 1 (cons 2 (cons 3 nil)))   ; リスト: (1 2 3)
  ```

- **リスト要素へのアクセス:**
    - `car`: リストの最初の要素を返します。
    - `cdr`: リストの残りの部分（最初の要素を除くすべて）を返します。

    例:
    ```lisp
    (car '(1 2 3))   ; 1を返します
    (cdr '(1 2 3))   ; (2 3)を返します
    ```

- **配列:**  
  配列は固定サイズの多次元データ構造で、あらゆる型の要素を格納できます。ISLISPの配列構文は、他のLisp方言と類似しています。

  配列の作成例：
  ```lisp
  (make-array 3 :initial-contents '(1 2 3))    ; 3つの要素を持つ配列: (1 2 3)
  ```

  - `aref` 関数を使用して配列の要素にアクセスできます。
  ```lisp
  (aref (make-array 3 :initial-contents '(1 2 3)) 0)   ; 最初の要素にアクセス：1
  ```



#### **文字列と文字**

- **文字列:**  
  文字列とは、二重引用符で囲まれた文字の並びです。ISLISPでは、文字列はテキスト操作に便利です。

  例:
  ```lisp
  "Hello, ISLISP!"   ; 文字列
  ```

  length、substring、concatenateなどの関数を使用して文字列を操作できます。
  ```lisp
  (length “Hello")           ; 5を返します
  (substring “Hello" 1 3)    ; 「el」 を返します
  (concatenate 'string "Hello, " “ISLISP!")   ; 「Hello, ISLISP!」 を返します
  ```

- **文字:**  
  文字とは、Unicode 文字の 1 つです。 ISLISP では、文字は `#\` で囲み、その後に文字を続けます。

  例:
  ```lisp
  #\A    ; 文字 'A'
  #\Space   ; スペース文字
  ```



#### **変数と代入**

- **変数の定義:**  
  ISLISPでは、変数は通常、`defvar` (グローバル変数用) または `let` (ローカル変数用) を使用して定義されます。

  グローバル変数の例:
  ```lisp
  (defvar *x* 42)   ; グローバル変数 *x* を値 42 で定義
  ```

- **let` によるローカル変数:**  
  let` を使用して、スコープ内のローカルバインディングを作成します。
  ```lisp
  (let ((x 10) (y 20))   ; ローカル変数 x と y
    (+ x y))             ; 30 を返します
  ```

- `let*`: `let` と同様ですが、逐次的なバインディングが可能です。各変数は前のものに依存することができます。
  
  例:
  ```lisp
  (let* ((x 5) (y (+ x 2)))   ; y は x に依存します
    (+ x y))                   ; 12 (5 + 7) を返します
  ```

- **変数の再代入:**
  setf を使用してグローバル変数の値を再代入することができます。
  ```lisp
  (setf *x* 100) ; *x* の値を 100 に変更します。
  ```
