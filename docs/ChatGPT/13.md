# 13. 小規模アプリケーション設計

## 参考節
- §§12, 14, 26-28, 29（標準機能で組み立てる）

## 13.1 構成原則
- 入力→変換→出力を分離
- エラー経路を先に決める
- 拡張依存を境界化

## 13.2 標準機能中心の例
```lisp
(defun process-line (s)
  (format nil "ITEM=~A" s))

(defun copy-transform (in-path out-path)
  (with-open-file (in in-path :direction :input)
    (with-open-file (out out-path :direction :output :if-exists :supersede)
      (let ((line (read-line in nil)))
        (while line
          (write-line (process-line line) out)
          (setq line (read-line in nil)))))))
```

## 13.3 テスト観点
- 空入力
- 異常ファイルパス
- 文字コード境界（処理系依存）
